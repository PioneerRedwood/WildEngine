# Streaming using SDL

## SDL 스트리밍
- SDL로 비트맵 무비를 스트리밍하는 기능을 완성
- SDL 윈도우 생성, 그래픽 그리기 등 기초부터 시작
- 멀티 스레드; 비트맵을 스트리밍하기 위해서는 읽고 사용하는 스레드가 달라야 함
  - beginThread, Critical Section 사용

## SDL 사용 on Windows
- [SDL2 다운로드](https://github.com/libsdl-org/SDL/releases/tag/release-2.30.7) 를 통해 `SDL2-devel-2.30.7-VC.zip`을 다운 받는다. 해당 압축 파일은 개발을 위한 용도로 Visual C++을 위한 패키지가 들어있다. 
- 압축을 해제한 뒤 응용 프로그램이 실행되는 곳에 `SDL2.dll` 파일을 위치시킨다. 링크 시 필요. 
- 프로젝트 파일의 속성에서 `Include directory`에 `SDL2/include` 경로를 추가한다. 

## 어떻게 영상을 스트리밍하는가?
- 목표: 메인 스레드에서는 로드한 프레임을 실행, 워커 스레드에서는 정해진 수만큼 프레임을 미리 로드해놓는다. 
- 구현할 부분:
  - 워커 스레드는 어떤 방식으로 몇번째 프레임을 로드해야하는지 결정하는가?
    - 일정 주기마다 루프를 돌며 사용한 수만큼 큐에 미리 로드. 사용한 수는 어떻게 구하는지?
    - 메인 스레드는 이 큐에 있는 프레임을 꺼내 사용. 
  - 프레임 스킵이 발생해서 메인 스레드에서 현재 미리 로드한 프레임에 실행할 것이 없다면 어떻게 해야 하는가?
    - 스킵된 프레임을 어떻게 보여줘야하는지?

- 시나리오
  - 총 5개의 프레임이 있으며, 초당 1프레임, 파일 로드하는 시간은 1초보다 낮을 것이라 가정하자.
1) 1번 프레임을 사용하고 1번 프레임의 텍스처를 사용했음으로 표시. 큐의 형태 
  - [1 2 3 4 5] -> [1' 2 3 4 5]
2) 1번 프레임이 사용되었으니, 생산자 스레드에선 미리 로드된 프레임 중 마지막의 그 다음 프레임을 미리 로드. 
  - [1' 2 3 4 5] -> [2 3 4 5 6]
3) 1 + 2 반복. 

## 피드백
더 간단하고 단순하게 할 것. 
- preloads - 벡터로 할것
- 텍스처는 한 장만 미리 만들어둘것 
